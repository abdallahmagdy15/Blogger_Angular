<head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<div class="content row">
    <div class="metadata col-12 col-md-2">
        <div class="btn">
            <img class="authorDp img-responsive" [src]="(blog.authorDp)?blog.authorDp:'../assets/male_dp.jpg'">
            <a class="btn authorName" [routerLink]="['/author/'+blog.author]">By {{blog.authorName}}</a>
            <p>{{blog.updatedAt | date}}</p>
        </div>
        <hr>
        <div class="tags" *ngIf="blog.tags?(blog.tags!.length>0):false">
            <label class="lead">Tags:</label>
            <div>
                <a (click)="searchByTag(tag)" class="btn font-weight-bold" *ngFor="let tag of blog.tags">#{{tag}} </a>
            </div>
        </div>
    </div>
    <div class="col-12 col-md-10">
        <div class="blog-content mb-4">
            <h1 class="card-title mb-5">{{blog.title}}</h1>
            <div class="mb-5">
                <img class="img-responsive blogPhoto" *ngIf="blog.photo" [src]="blog.photo">
            </div>
            <p class='blogBody'>{{blog.body}}</p>
        </div>
        <hr>
        <div class="react">
            <button class="btn d-inline counter likeBtn" (click)="isLiked?isLiked=false:isLiked=true" (click)="likeBlog()">
                <fa-icon [ngClass]="{'liked': isLiked}" [icon]="faThumbsUp"></fa-icon>
                {{isLiked?'Liked':'Like'}}
            </button>
            <a class="btn counter">
                <span> {{(blog.likes)?blog.likes.length:'0'}}</span> Likes â€¢
                <fa-icon [icon]="faComment"></fa-icon>
                <span> {{(blog.comments)?blog.comments.length:'0'}}</span> Comments
            </a>
        </div>
    </div>

    <!-- comments -->
    <!-- add comment -->
    <form [formGroup]="commentForm" (ngSubmit)="onSubmit(commentForm)">
        <textarea type="text" formControlName="commentBody" placeholder="enter your comment"></textarea>
        <button type="submit">Post as @{{auth.getCurrUser().username}}</button>
    </form>
    <!-- show comments -->
    <app-comment-card *ngFor="let comment of blog.comments" [comment]="comment"></app-comment-card>

</div>